
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="kkangil&#39;s Blog">
    <title>메모이제이션 - kkangil&#39;s Blog</title>
    <meta name="author" content="kkangil">
    <link rel="canonical" href="https://kkangil.github.io/2020/01/12/메모이제이션/"/>
    <meta name="google-site-verification" content="6_Smv-rWZw7urNifInu4CE1hyB_GcTbeoXpaJkoFWIo" />
    <meta name="naver-site-verification" content="b0ce7bc14af00ce2aee96528313654d78c325351" />
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/rss2.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"kkangil","sameAs":["https://github.com/kkangil","http://stackoverflow.com/users/10870848/kkangil","https://www.linkedin.com/in/kangil-kim-31093a169/","fe.kkangil@gmail.com"],"image":"profile.jpeg"},"articleBody":"메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 메모이제이션은 함수형 프로그래밍 관련 이야기에서는 빠지지 않고 꼭 등장하는 사례이기도 하다.\n\n함수형 자바스크립트에서 메모이제이션의 대표적인 사례로는, 한 번 들어온 인자에 대한 결과를 캐싱하여 함수 본체를 실행하지 않고 결과를 즉시 리턴하는 _.memoize 같은 고차 함수가 있다. 동일한 인자를 받으면 항상 동일한 결과를 리턴하는 순수 함수의 콘셉트를 잘 활용한 사례이다. 함수 본체에서 하는 일이 복잡하거나 연산이 많거나 내부에서 생성하는 자원이 많거나 시간이 오래 걸리는 함수일수록 메모이제이션을 통해 얻을 수 있는 성능적 이득도 커진다.\nmemoize 함수메모이제이션 코드로 이해하기메모이제이션에 대해 가장 빠르고 쉽게 이해하는 방법은 역시 코드를 통해 확인 하는 것이다. 간단 버전의 memoize 함수를 구현하여 메모이제이션의 콘셉트에 대해 파악해 보려 한다.\n12345678910111213function memoize(func) &#123;  var cache = &#123;&#125;;  return function (arg) &#123;    if (cache[arg]) &#123; // 이미 동일한 인자에 대한 결과가 있으면 리턴      console.log(&apos;캐시로 결과 바로 리턴&apos;, arg);      return cache[arg];    &#125;    console.log(&apos;본체 실행&apos;, arg);    // 받아둔 함수를 실행하면서 결과를 cache에 남겨둠    return cache[arg] = func.apply(this, arguments);  &#125;&#125;\n간단한 memoize 함수를 구현했다. memoize 함수를 이용해 mult5 라는 함수를 만든다.\n123456789101112var mult5 = memoize(function (a) &#123;  return a * 5;&#125;)console.log(mult5(1));// 본체 실행 1 -&gt; 5console.log(mult5(2));// 본체 실행 2 -&gt; 10console.log(mult5(1));// 캐시로 결과 바로 리턴 1 -&gt; 5console.log(mult5(2));// 캐시로 결과 바로 리턴 2 -&gt; 10\n매우 간단한 개념이다. memoize는 고차 함수다. 해당 로직을 memoize가 대신하도록 만든 사례이다. 메모이제이션은 인자가 하나일 때 활용성이 높다. 하지만 위의 memoize는 인자를 하나만 사용할 수 있다는 점과 문자열로 식별이 가능한 인자만 사용할 수 있다는 점이 아쉽다.\n1234567891011121314151617var add = memoize(function (a, b) &#123;  return a + b;&#125;)console.log(add(3, 5)); // 본체 실행 3 -&gt; 8console.log(add(3, 10)); // 캐시로 결과 바로 리턴 8 캐시가 동작했지만 3에만 의존하기 때문var keys = memoize(function (obj) &#123;  return _.keys(obj);&#125;);console.log(keys(&#123; a: 1, b: 2 &#125;));// 본체 실행 Object &#123;a: 1, b: 2&#125; -&gt; [&apos;a&apos;,&apos;b&apos;]console.log(keys(&#123; a: 1, b: 2 &#125;));// 캐시로 결과 바로 리턴 Object &#123;a: 1, b: 2&#125; -&gt; [&apos;a&apos;,&apos;b&apos;]console.log(keys(&#123; a: 10, b: 20 &#125;));// 잘 동작하는 듯 했지만 cache가 &#123;[object Object]: ...&#125; 이런 식으로 되기 때문에 오류\n위의 코드를 보면 오류가 발생했다. JSON.stringfy(arguments); 를 활용해서 위와 같은 문제를 해결할 수 있다. 하지만 이 방법은 별도의 연산이 생겨 느리기도 하고 해결할 수 있는 범위가 적다. 이럴때는 역시 함수로 추상화를 하는 것이 좋다.\nPartial.js의 _.memoize2Partial.js에도 _.memoize가 있다. partial.js의 _.memoize는 Underscore.js의 _.memoize다. partial.js 에는 또 다른 메모이제이션 함수인 _.memoize2가 있다. 이 함수는 인자를 하나만 사용하는 함수에서만 사용할 수 있으며 인자로 객체만 사용할 수 있다.\n_.memoize가 캐시를 함수에 기록한다면 _.memoize2는 캐시를 인자에 기록한다. _.memoize2는 함수 생성 시 함수의 고유 아이디를 만든 후, 인자로 들어오는 객체에 해당 고유 아이디를 기준으로 arg._memoize 밑에 담아 둔다. _.memoize2는 불변 객체 콘셉트와 함께 사용하기 위해 만든 함수이고 실무에서 사용하기 위해 만든 함수다.\n1234567891011121314151617181920/** * _.memoize2 */var f1 = _.memoize2(function (obj) &#123;  console.log(&apos;함수 본체에 들어옴&apos;);  return obj.a + 10;&#125;);var obj1 = &#123; a: 1 &#125;;var obj2 = &#123; a: 2 &#125;;console.log(f1(obj1));// 함수 본체에 들어옴 11console.log(f1(obj1));// 캐시 사용console.log(f1(obj2));// 함수 본체에 들어옴 12console.log(f1(obj2));// 캐시 사용\n_.memoize2는 _.memoize와는 다른 특징과 장점을 가지고 있다. 우선 각 함수들에 대한 결과값을 인자로 사용된 객체에 담아두므로 한 번 사용하고 버리는 객체라면, 그 값은 별도의 관리 없이도 메모리에서 비워진다. 이것이 일단 가장 큰 장점이다. _.memoize는 결과 캐시가 함수에 쌓이기 때문에 함수를 없애거나 함수에 달린 캐시를 별도로 관리해야 하지만, _.memoize2는 사용한 인자에 결과 캐시가 쌓이므로 그 값을 계속 사용하느냐 아니냐에 따라 자동으로 메모리가 관리된다. 이것 외에도 값을 불변적으로 다룰 때 얻을 수 있는 실용적인 이점이 있다.\n12345678910111213141516var evens = _.memoize2(function (list) &#123;  console.log(&apos;함수 본체에 들어와서 loop 실행&apos;);  return _.filter(list, function (num) &#123;    return num % 2 === 0;  &#125;)&#125;);var list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];console.log(evens(list)); // [2,4,6,8,10]console.log(evens(list)); // [2,4,6,8,10] (캐시를 사용하여 loop를 돌지 않음)list.push(11);list.push(12);console.log(list); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]console.log(evens(list)); // 캐시가 사용되어 12가 나오지 않음.\n마지막 evens 실행 시에는 원하는 결과를 얻지 못했다. 값을 가변적으로 다뤘기 때문이다. 불변적으로 값을 다루게 되면 캐시도 자동으로 갱신되고, 값이 변경되지 않은 상태에서는 계속해서 캐시를 사용하기 때문에 성능적으로 이득을 얻을 수 있다.\n123456789var list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];console.log(evens(list)); // [2,4,6,8,10]console.log(evens(list)); // [2,4,6,8,10] (캐시를 사용하여 loop를 돌지 않음)list2 = list2.concat(11, 12);console.log(list2); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]console.log(evens(list2)); // [2,4,6,8,10, 12]console.log(evens(list2)); // [2,4,6,8,10, 12] (캐시를 사용하여 loop를 돌지 않음)\n_.memoize2로 만든 함수는 인자를 한 개만 받을 수 있다. 두 개 이상의 인자를 필요로 하는 함수는 _.memoize2를 사용할 수 없다.\n참조: 함수형 자바스크립트 프로그래밍\n","dateCreated":"2020-01-12T13:45:18+09:00","dateModified":"2020-01-12T17:13:07+09:00","datePublished":"2020-01-12T13:45:18+09:00","description":"메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 메모이제이션은 함수형 프로그래밍 관련 이야기에서는 빠지지 않고 꼭 등장하는 사례이기도 하다.","headline":"메모이제이션","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://kkangil.github.io/2020/01/12/메모이제이션/"},"publisher":{"@type":"Organization","name":"kkangil","sameAs":["https://github.com/kkangil","http://stackoverflow.com/users/10870848/kkangil","https://www.linkedin.com/in/kangil-kim-31093a169/","fe.kkangil@gmail.com"],"image":"profile.jpeg","logo":{"@type":"ImageObject","url":"profile.jpeg"}},"url":"https://kkangil.github.io/2020/01/12/메모이제이션/","keywords":"javascript, 함수형 프로그래밍, memoization"}</script>
    <meta name="description" content="메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 메모이제이션은 함수형 프로그래밍 관련 이야기에서는 빠지지 않고 꼭 등장하는 사례이기도 하다.">
<meta name="keywords" content="javascript,함수형 프로그래밍,memoization">
<meta property="og:type" content="blog">
<meta property="og:title" content="메모이제이션">
<meta property="og:url" content="https://kkangil.github.io/2020/01/12/메모이제이션/index.html">
<meta property="og:site_name" content="kkangil&#39;s Blog">
<meta property="og:description" content="메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 메모이제이션은 함수형 프로그래밍 관련 이야기에서는 빠지지 않고 꼭 등장하는 사례이기도 하다.">
<meta property="og:locale" content="ko">
<meta property="og:updated_time" content="2020-01-12T08:13:07.797Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="메모이제이션">
<meta name="twitter:description" content="메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 메모이제이션은 함수형 프로그래밍 관련 이야기에서는 빠지지 않고 꼭 등장하는 사례이기도 하다.">
    
    
        
    
    
        <meta property="og:image" content="https://kkangil.github.io/assets/images/profile.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-c4ozcsklz4kht2pebhp44xorvyverh23toayhn7i6ubrpyedak24hv1v0hyd.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-165569140-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-165569140-1');
    </script>


    
    <script data-ad-client="ca-pub-5445993070474035" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">kkangil&#39;s Blog</a>
    </div>
    
        
            <a class="header-right-picture " href="#about">
        
        
            <img class="header-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">kkangil</h4>
                
                    <h5 class="sidebar-profile-bio"><p>React와 Node를 사용하는 풀스택 개발자가 되는것이 목표입니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="카테고리">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="태그">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="기록">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">기록</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="검색">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="About">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/kkangil" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="http://stackoverflow.com/users/10870848/kkangil" target="_blank" rel="noopener" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.linkedin.com/in/kangil-kim-31093a169/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/fe.kkangil@gmail.com" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            메모이제이션
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-01-12T13:45:18+09:00">
	
		    1월 12, 2020
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/함수형-프로그래밍/">함수형 프로그래밍</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 메모이제이션은 함수형 프로그래밍 관련 이야기에서는 빠지지 않고 꼭 등장하는 사례이기도 하다.</p>
<a id="more"></a>
<p>함수형 자바스크립트에서 메모이제이션의 대표적인 사례로는, 한 번 들어온 인자에 대한 결과를 캐싱하여 함수 본체를 실행하지 않고 결과를 즉시 리턴하는 _.memoize 같은 고차 함수가 있다. 동일한 인자를 받으면 항상 동일한 결과를 리턴하는 순수 함수의 콘셉트를 잘 활용한 사례이다. 함수 본체에서 하는 일이 복잡하거나 연산이 많거나 내부에서 생성하는 자원이 많거나 시간이 오래 걸리는 함수일수록 메모이제이션을 통해 얻을 수 있는 성능적 이득도 커진다.</p>
<h2 id="memoize-함수"><a href="#memoize-함수" class="headerlink" title="memoize 함수"></a>memoize 함수</h2><h3 id="메모이제이션-코드로-이해하기"><a href="#메모이제이션-코드로-이해하기" class="headerlink" title="메모이제이션 코드로 이해하기"></a>메모이제이션 코드로 이해하기</h3><p>메모이제이션에 대해 가장 빠르고 쉽게 이해하는 방법은 역시 코드를 통해 확인 하는 것이다. 간단 버전의 memoize 함수를 구현하여 메모이제이션의 콘셉트에 대해 파악해 보려 한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function memoize(func) &#123;</span><br><span class="line">  var cache = &#123;&#125;;</span><br><span class="line">  return function (arg) &#123;</span><br><span class="line">    if (cache[arg]) &#123; // 이미 동일한 인자에 대한 결과가 있으면 리턴</span><br><span class="line">      console.log(&apos;캐시로 결과 바로 리턴&apos;, arg);</span><br><span class="line">      return cache[arg];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    console.log(&apos;본체 실행&apos;, arg);</span><br><span class="line">    // 받아둔 함수를 실행하면서 결과를 cache에 남겨둠</span><br><span class="line">    return cache[arg] = func.apply(this, arguments);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>간단한 memoize 함수를 구현했다. memoize 함수를 이용해 mult5 라는 함수를 만든다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var mult5 = memoize(function (a) &#123;</span><br><span class="line">  return a * 5;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(mult5(1));</span><br><span class="line">// 본체 실행 1 -&gt; 5</span><br><span class="line">console.log(mult5(2));</span><br><span class="line">// 본체 실행 2 -&gt; 10</span><br><span class="line">console.log(mult5(1));</span><br><span class="line">// 캐시로 결과 바로 리턴 1 -&gt; 5</span><br><span class="line">console.log(mult5(2));</span><br><span class="line">// 캐시로 결과 바로 리턴 2 -&gt; 10</span><br></pre></td></tr></table></figure>
<p>매우 간단한 개념이다. memoize는 고차 함수다. 해당 로직을 memoize가 대신하도록 만든 사례이다. 메모이제이션은 인자가 하나일 때 활용성이 높다. 하지만 위의 memoize는 인자를 하나만 사용할 수 있다는 점과 문자열로 식별이 가능한 인자만 사용할 수 있다는 점이 아쉽다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var add = memoize(function (a, b) &#123;</span><br><span class="line">  return a + b;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(add(3, 5)); // 본체 실행 3 -&gt; 8</span><br><span class="line">console.log(add(3, 10)); // 캐시로 결과 바로 리턴 8 캐시가 동작했지만 3에만 의존하기 때문</span><br><span class="line"></span><br><span class="line">var keys = memoize(function (obj) &#123;</span><br><span class="line">  return _.keys(obj);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(keys(&#123; a: 1, b: 2 &#125;));</span><br><span class="line">// 본체 실행 Object &#123;a: 1, b: 2&#125; -&gt; [&apos;a&apos;,&apos;b&apos;]</span><br><span class="line">console.log(keys(&#123; a: 1, b: 2 &#125;));</span><br><span class="line">// 캐시로 결과 바로 리턴 Object &#123;a: 1, b: 2&#125; -&gt; [&apos;a&apos;,&apos;b&apos;]</span><br><span class="line">console.log(keys(&#123; a: 10, b: 20 &#125;));</span><br><span class="line">// 잘 동작하는 듯 했지만 cache가 &#123;[object Object]: ...&#125; 이런 식으로 되기 때문에 오류</span><br></pre></td></tr></table></figure>
<p>위의 코드를 보면 오류가 발생했다. JSON.stringfy(arguments); 를 활용해서 위와 같은 문제를 해결할 수 있다. 하지만 이 방법은 별도의 연산이 생겨 느리기도 하고 해결할 수 있는 범위가 적다. 이럴때는 역시 함수로 추상화를 하는 것이 좋다.</p>
<h3 id="Partial-js의-memoize2"><a href="#Partial-js의-memoize2" class="headerlink" title="Partial.js의 _.memoize2"></a>Partial.js의 _.memoize2</h3><p>Partial.js에도 _.memoize가 있다. partial.js의 _.memoize는 Underscore.js의 _.memoize다. partial.js 에는 또 다른 메모이제이션 함수인 _.memoize2가 있다. 이 함수는 인자를 하나만 사용하는 함수에서만 사용할 수 있으며 인자로 객체만 사용할 수 있다.</p>
<p>_.memoize가 캐시를 함수에 기록한다면 _.memoize2는 캐시를 인자에 기록한다. _.memoize2는 함수 생성 시 함수의 고유 아이디를 만든 후, 인자로 들어오는 객체에 해당 고유 아이디를 기준으로 arg._memoize 밑에 담아 둔다. _.memoize2는 불변 객체 콘셉트와 함께 사용하기 위해 만든 함수이고 실무에서 사용하기 위해 만든 함수다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * _.memoize2</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">var f1 = _.memoize2(function (obj) &#123;</span><br><span class="line">  console.log(&apos;함수 본체에 들어옴&apos;);</span><br><span class="line">  return obj.a + 10;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var obj1 = &#123; a: 1 &#125;;</span><br><span class="line">var obj2 = &#123; a: 2 &#125;;</span><br><span class="line"></span><br><span class="line">console.log(f1(obj1));</span><br><span class="line">// 함수 본체에 들어옴 11</span><br><span class="line">console.log(f1(obj1));</span><br><span class="line">// 캐시 사용</span><br><span class="line">console.log(f1(obj2));</span><br><span class="line">// 함수 본체에 들어옴 12</span><br><span class="line">console.log(f1(obj2));</span><br><span class="line">// 캐시 사용</span><br></pre></td></tr></table></figure>
<p>_.memoize2는 _.memoize와는 다른 특징과 장점을 가지고 있다. 우선 각 함수들에 대한 결과값을 인자로 사용된 객체에 담아두므로 한 번 사용하고 버리는 객체라면, 그 값은 별도의 관리 없이도 메모리에서 비워진다. 이것이 일단 가장 큰 장점이다. _.memoize는 결과 캐시가 함수에 쌓이기 때문에 함수를 없애거나 함수에 달린 캐시를 별도로 관리해야 하지만, _.memoize2는 사용한 인자에 결과 캐시가 쌓이므로 그 값을 계속 사용하느냐 아니냐에 따라 자동으로 메모리가 관리된다. 이것 외에도 값을 불변적으로 다룰 때 얻을 수 있는 실용적인 이점이 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var evens = _.memoize2(function (list) &#123;</span><br><span class="line">  console.log(&apos;함수 본체에 들어와서 loop 실행&apos;);</span><br><span class="line">  return _.filter(list, function (num) &#123;</span><br><span class="line">    return num % 2 === 0;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];</span><br><span class="line">console.log(evens(list)); // [2,4,6,8,10]</span><br><span class="line">console.log(evens(list)); // [2,4,6,8,10] (캐시를 사용하여 loop를 돌지 않음)</span><br><span class="line"></span><br><span class="line">list.push(11);</span><br><span class="line">list.push(12);</span><br><span class="line">console.log(list); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span><br><span class="line"></span><br><span class="line">console.log(evens(list)); // 캐시가 사용되어 12가 나오지 않음.</span><br></pre></td></tr></table></figure>
<p>마지막 evens 실행 시에는 원하는 결과를 얻지 못했다. 값을 가변적으로 다뤘기 때문이다. 불변적으로 값을 다루게 되면 캐시도 자동으로 갱신되고, 값이 변경되지 않은 상태에서는 계속해서 캐시를 사용하기 때문에 성능적으로 이득을 얻을 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var list = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];</span><br><span class="line">console.log(evens(list)); // [2,4,6,8,10]</span><br><span class="line">console.log(evens(list)); // [2,4,6,8,10] (캐시를 사용하여 loop를 돌지 않음)</span><br><span class="line"></span><br><span class="line">list2 = list2.concat(11, 12);</span><br><span class="line">console.log(list2); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]</span><br><span class="line"></span><br><span class="line">console.log(evens(list2)); // [2,4,6,8,10, 12]</span><br><span class="line">console.log(evens(list2)); // [2,4,6,8,10, 12] (캐시를 사용하여 loop를 돌지 않음)</span><br></pre></td></tr></table></figure>
<p>_.memoize2로 만든 함수는 인자를 한 개만 받을 수 있다. 두 개 이상의 인자를 필요로 하는 함수는 _.memoize2를 사용할 수 없다.</p>
<p>참조: <a href="http://www.yes24.com/Product/Goods/56885507" target="_blank" rel="noopener">함수형 자바스크립트 프로그래밍</a></p>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/javascript/">javascript</a> <a class="tag tag--primary tag--small t-link" href="/tags/memoization/">memoization</a> <a class="tag tag--primary tag--small t-link" href="/tags/함수형-프로그래밍/">함수형 프로그래밍</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2020/01/19/도구-다루기/" data-tooltip="도구 다루기" aria-label="이전: 도구 다루기">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/12/29/값에-대해/" data-tooltip="값에 대해" aria-label="다음: 값에 대해">
                
                    <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="글 공유">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kkangil.github.io/2020/01/12/메모이제이션/" title="Facebook 공유">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://kkangil.github.io/2020/01/12/메모이제이션/" title="Twitter 공유">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://kkangil.github.io/2020/01/12/메모이제이션/" title="Google+ 공유">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="상단 이동">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 kkangil. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2020/01/19/도구-다루기/" data-tooltip="도구 다루기" aria-label="이전: 도구 다루기">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2019/12/29/값에-대해/" data-tooltip="값에 대해" aria-label="다음: 값에 대해">
                
                    <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="글 공유">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kkangil.github.io/2020/01/12/메모이제이션/" title="Facebook 공유">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://kkangil.github.io/2020/01/12/메모이제이션/" title="Twitter 공유">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://kkangil.github.io/2020/01/12/메모이제이션/" title="Google+ 공유">
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="상단 이동">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kkangil.github.io/2020/01/12/메모이제이션/">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook 공유</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://kkangil.github.io/2020/01/12/메모이제이션/">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter 공유</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://kkangil.github.io/2020/01/12/메모이제이션/">
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+ 공유</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">kkangil</h4>
        
            <div id="about-card-bio"><p>React와 Node를 사용하는 풀스택 개발자가 되는것이 목표입니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>web developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Asia/Seoul
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-dbd16rvloemmuxdzniplmnxxvwoz24eya9wol0b7vvmlokgqsjivmb8dnscy.min.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
